{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '40813799-13823f8fac4dfa82ba757ecf4';\n\nexport async function performSearch(query, page = 1, perPage = 40) {\n  const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    const {data} = await axios.get(apiUrl);\n    return data\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { performSearch } from './pixabay-api';\n\nconst el = {\n  searchForm: document.getElementById('search-form'),\n  searchQueryInput: document.getElementsByName('searchQuery')[0],\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nlet lightbox = new SimpleLightbox('.gallery-link', {\n  captions: true,\n});\n\nlet currentPage = 1;\n\nel.searchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  const searchQuery = el.searchQueryInput.value.trim();\n  if (searchQuery) {\n    try {\n      const { hits, totalHits } = await performSearch(searchQuery, currentPage);\n\n      if (totalHits === 0) {\n        displayNoResultsMessage();\n        return;\n      }\n\n      Notiflix.Report.success('Search Results', `Hooray! We found ${totalHits} images.`, 'OK');\n\n      displayImages(hits, totalHits);\n      // el.searchQueryInput.value = '';\n\n      if (hits.length >= 40) {\n        el.loadMoreBtn.style.display = 'block';\n      } else {\n        el.loadMoreBtn.style.display = 'none';\n      }\n    } catch (error) {\n      console.error('Search error:', error);\n\n      Notiflix.Report.failure('Search Error', 'Sorry, there was an error retrieving the images. Please try again later.', 'OK');\n    }\n  } else {\n    Notiflix.Report.failure(\"Please enter a request\", 'OK');\n    el.searchQueryInput.value = '';\n  }\n});\n\nel.loadMoreBtn.addEventListener('click', async (event) => {\n  currentPage += 1;\n  addNextPageImages();\n});\n\nfunction addNextPageImages() {\n  performSearch(el.searchQueryInput.value, currentPage)\n    .then(({ hits }) => {\n      el.gallery.insertAdjacentHTML('beforeend', createMarkup(hits));\n    })\n    .catch((error) => {\n      console.error('Load more error:', error);\n    });\n}\n\nfunction displayImages(hits, totalHits) {\n  const markup = createMarkup(hits);\n  el.gallery.innerHTML = markup;\n  initializeLightbox();\n\n  if (totalHits / hits.length === currentPage) {\n    el.loadMoreBtn.style.display = 'block';\n  } else {\n    el.loadMoreBtn.style.display = 'none';\n    Notiflix.Report.info('End of Results', \"We're sorry, but you've reached the end of search results.\", 'OK');\n  }\n}\n\nfunction displayNoResultsMessage() {\n  el.gallery.innerHTML = '<p>No results found. Please try another search.</p>';\n  el.loadMoreBtn.style.display = 'none';\n}\n\nfunction createMarkup(galleryItems) {\n  return galleryItems\n    .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n      return `\n        <div class=\"photo-card\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\" title=\"${tags}\" >\n            <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"300\" loading=\"lazy\">\n          </a>\n          <div class=\"info\">\n            <p class=\"info-item\">\n            <b>Likes</b> ${likes}</p>\n            <p class=\"info-item\">\n            <b>Views</b> ${views}</p>\n            <p class=\"info-item\">\n            <b>Comments</b> ${comments}</p>\n            <p class=\"info-item\">\n            <b>Downloads</b> ${downloads}</p>\n          </div>\n        </div>\n      `;\n    })\n    .join('');\n}\n\nfunction initializeLightbox() {\n  if (lightbox && lightbox.destroy) {\n    lightbox.destroy();\n  }\n\n  lightbox = new SimpleLightbox('.gallery-link', {\n    captions: true,\n  });\n}\n"],"names":["apiKey","performSearch","query","page","perPage","apiUrl","data","axios","el","lightbox","SimpleLightbox","currentPage","event","searchQuery","hits","totalHits","displayNoResultsMessage","displayImages","error","addNextPageImages","createMarkup","markup","initializeLightbox","galleryItems","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAEA,MAAMA,EAAS,qCAER,eAAeC,EAAcC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CACjE,MAAMC,EAAS,gCAAgCL,OAAYE,kEAAsEC,cAAiBC,IAE1I,CAAC,KAAAE,CAAI,EAAI,MAAMC,EAAM,IAAIF,CAAM,EACrC,OAAOC,CACX,CCLA,MAAME,EAAK,CACT,WAAY,SAAS,eAAe,aAAa,EACjD,iBAAkB,SAAS,kBAAkB,aAAa,EAAE,GAC5D,QAAS,SAAS,cAAc,UAAU,EAC1C,YAAa,SAAS,cAAc,YAAY,CAClD,EAEA,IAAIC,EAAW,IAAIC,EAAe,gBAAiB,CACjD,SAAU,EACZ,CAAC,EAEGC,EAAc,EAElBH,EAAG,WAAW,iBAAiB,SAAU,MAAOI,GAAU,CACxDA,EAAM,eAAc,EAEpB,MAAMC,EAAcL,EAAG,iBAAiB,MAAM,KAAI,EAClD,GAAIK,EACF,GAAI,CACF,KAAM,CAAE,KAAAC,EAAM,UAAAC,CAAW,EAAG,MAAMd,EAAcY,EAAaF,CAAW,EAExE,GAAII,IAAc,EAAG,CACnBC,IACA,MACD,CAED,SAAS,OAAO,QAAQ,iBAAkB,oBAAoBD,YAAqB,IAAI,EAEvFE,EAAcH,EAAMC,CAAS,EAGzBD,EAAK,QAAU,GACjBN,EAAG,YAAY,MAAM,QAAU,QAE/BA,EAAG,YAAY,MAAM,QAAU,MAElC,OAAQU,EAAP,CACA,QAAQ,MAAM,gBAAiBA,CAAK,EAEpC,SAAS,OAAO,QAAQ,eAAgB,2EAA4E,IAAI,CACzH,MAED,SAAS,OAAO,QAAQ,yBAA0B,IAAI,EACtDV,EAAG,iBAAiB,MAAQ,EAEhC,CAAC,EAEDA,EAAG,YAAY,iBAAiB,QAAS,MAAOI,GAAU,CACxDD,GAAe,EACfQ,GACF,CAAC,EAED,SAASA,GAAoB,CAC3BlB,EAAcO,EAAG,iBAAiB,MAAOG,CAAW,EACjD,KAAK,CAAC,CAAE,KAAAG,KAAW,CAClBN,EAAG,QAAQ,mBAAmB,YAAaY,EAAaN,CAAI,CAAC,CACnE,CAAK,EACA,MAAOI,GAAU,CAChB,QAAQ,MAAM,mBAAoBA,CAAK,CAC7C,CAAK,CACL,CAEA,SAASD,EAAcH,EAAMC,EAAW,CACtC,MAAMM,EAASD,EAAaN,CAAI,EAChCN,EAAG,QAAQ,UAAYa,EACvBC,IAEIP,EAAYD,EAAK,SAAWH,EAC9BH,EAAG,YAAY,MAAM,QAAU,SAE/BA,EAAG,YAAY,MAAM,QAAU,OAC/B,SAAS,OAAO,KAAK,iBAAkB,6DAA8D,IAAI,EAE7G,CAEA,SAASQ,GAA0B,CACjCR,EAAG,QAAQ,UAAY,sDACvBA,EAAG,YAAY,MAAM,QAAU,MACjC,CAEA,SAASY,EAAaG,EAAc,CAClC,OAAOA,EACJ,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,KAC1D;AAAA;AAAA,0CAE6BL,aAAyBC;AAAA,wBAC3CF,WAAsBE;AAAA;AAAA;AAAA;AAAA,2BAInBC;AAAA;AAAA,2BAEAC;AAAA;AAAA,8BAEGC;AAAA;AAAA,+BAECC;AAAA;AAAA;AAAA,OAI1B,EACA,KAAK,EAAE,CACZ,CAEA,SAASR,GAAqB,CACxBb,GAAYA,EAAS,SACvBA,EAAS,QAAO,EAGlBA,EAAW,IAAIC,EAAe,gBAAiB,CAC7C,SAAU,EACd,CAAG,CACH"}